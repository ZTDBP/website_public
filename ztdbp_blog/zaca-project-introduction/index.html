<!doctype html><html lang=en><head prefix="og: http://ogp.me/ns#"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta property="og:title" content=" ZACA project introduction &#183;  ZTDBP Blog"><meta name=theme-color content="#hexcolor"><meta property="og:site_name" content="ZTDBP Blog"><meta property="og:url" content="https://ztdbp.xyz/ztdbp_blog/zaca-project-introduction/"><meta property="og:type" content="article"><meta property="og:article:published_time" content="2022-04-20T18:35:28+08:00"><meta property="og:article:tag" content="ZACA"><meta property="og:article:tag" content="ZTDBP"><meta property="og:article:tag" content="CFSSL"><title>ZACA project introduction &#183; ZTDBP Blog</title><link rel="alternative stylesheet" href=https://ztdbp.xyz/ztdbp_blog/css/bootstrap.min.css><link rel=stylesheet href=https://ztdbp.xyz/ztdbp_blog/css/font-awesome.min.css><link rel=stylesheet href=https://ztdbp.xyz/ztdbp_blog/css/main.css><link rel=stylesheet href=https://ztdbp.xyz/ztdbp_blog/css/github.css><link rel=stylesheet href=https://ztdbp.xyz/ztdbp_blog/css/color-theme.css><link rel=stylesheet href="//fonts.googleapis.com/css?family=Source+Sans+Pro:200,300,400" type=text/css><link rel="shortcut icon" href=https://ztdbp.xyz/ztdbp_blog/img/favicon.ico><link rel=apple-touch-icon href=https://ztdbp.xyz/ztdbp_blog/images/apple-touch-icon.png></head><body><header class=global-header style="background-image:url(https://picsum.photos/1920/1080?blur=3)"><section class=header-text><h1><a href=https://ztdbp.xyz/ztdbp_blog/>ZTDBP Blog</a></h1><h3 class=tag-line>Record the bits and pieces of ZTDBP.</h3><a class="btn btn-default btn-home" href=https://ztdbp.xyz/ztdbp_blog/><i class="fa fa-angle-left" aria-hidden=true></i>
&nbsp;Home</a><div class=navbar-container><a class="btn btn-default navbar-item" href=https://ztdbp.xyz/ztdbp_blog/categories>Categories</a>
<a class="btn btn-default navbar-item" href=https://ztdbp.xyz/ztdbp_blog/tags>Tags</a>
<a class="btn btn-default navbar-item" href=https://www.ZTDBP.xyz>ZTDBP</a></div></section></header><main class=container><article><header class=article-title><h1 class=text-primary>ZACA project introduction</h1></header><div class=delimiter></div><section><h1 id=zaca>ZACA</h1><p></p><p>ZACA is a PKI developed based on cloudflare cfssl,Public key infrastructure (PKI) governs the issuance of digital certificates to protect sensitive data, provide unique digital identities for users, devices and applications and secure end-to-end communications.</p><p>Zaca includes the following components：</p><ol><li>TLS service, as the CA center, is used for certificate issuance, revocation, signature and other operations.</li><li>API services, as some API services for certificate management.</li><li>OCSP service is a service that queries the online status of certificates and has been signed by OCSP.</li><li>SDK component, which is used for other services to access the CA SDK as a toolkit for certificate issuance and automatic rotation.</li></ol><h2 id=how-the-certificate-creation-process-works>How the Certificate Creation Process Works</h2><p>The certificate creation process relies heavily on asymmetric encryption and works as follows:</p><ul><li>A private key is created and the corresponding public key gets computed</li><li>The CA requests any identifying attributes of the private key owner and vets that information</li><li>The public key and identifying attributes get encoded into a Certificate Signing Request (CSR)</li><li>The CSR is signed by the key owner to prove possession of that private key</li><li>The issuing CA validates the request and signs the certificate with the CA’s own private key</li></ul><p>Anyone can use the public portion of a certificate to verify that it was actually issued by the CA by confirming who owns the private key used to sign the certificate. And, assuming they deem that CA trustworthy, they can verify that anything they send to the certificate holder will actually go to the intended recipient and that anything signed using that certificate holder’s private key was indeed signed by that person/device.</p><p>One important part of this process to note is that the CA itself has its own private key and corresponding public key, which creates the need for CA hierarchies.</p><h2 id=how-ca-hierarchies-and-root-cas-create-layers-of-trust>How CA Hierarchies and Root CAs Create Layers of Trust</h2><p>Since each CA has a certificate of its own, layers of trust get created through CA hierarchies — in which CAs issue certificates for other CAs. However, this process is not circular, as there is ultimately a root certificate. Normally, certificates have an issuer and a subject as two separate parties, but these are the same parties for root CAs, meaning that root certificates are self-signed. As a result, people must inherently trust the root certificate authority to trust any certificates that trace back to it.</p><h2 id=zaca-overall-architecture-and-working-mode>ZACA overall architecture and working mode</h2><p><img src=https://user-images.githubusercontent.com/52234994/165200574-ac647d20-1044-4580-8378-862d4fd4af9e.png alt=image-20220425165623191></p><h2 id=building>Building</h2><p>Building cfssl requires a .</p><pre tabindex=0><code>$ git clone git@github.com:ZTDBP/ZACA.git
$ cd ZACA
$ make
</code></pre><p>You can set GOOS and GOARCH environment variables to allow Go to cross-compile alternative platforms.</p><p>The resulting binaries will be in the bin folder:</p><pre tabindex=0><code>$ tree bin
bin
├── zaca
</code></pre><h2 id=configuration-reference>Configuration reference</h2><p>When ZACA starts each service, it needs to rely on some configurations, and the dependent configuration information has two configuration methods:</p><p><strong>configuration file:</strong></p><p>The configuration file is in the project root directory：<code>conf.yml</code> ,The file format is standard yaml format, which can be used as a reference。</p><p><strong>environment variable:</strong></p><p>In the project root directory：<code>.env.example</code>, The file describes how to configure some settings through environment variables.</p><p><strong>Priority:</strong></p><p>The configuration priority of environment variables is higher than the configuration in the configuration file.</p><h2 id=service-installation>Service Installation</h2><h3 id=tls-service>TLS service</h3><p>TLS service is used to issue certificates through control<code>IS_KEYMANAGER_SELF_SIGN</code> Environment variable to control whether to start as Root CA.</p><ul><li>Started as root CA, TLS service will self sign certificate.</li><li>When starting as an intermediate CA, the TLS service needs to request the root CA signing certificate as its own CA certificate.</li></ul><p>Start command：<code>zaca tls</code>，Default listening port 8081</p><h3 id=ocsp-service>OCSP service</h3><p>OCSP online certificate status is used to query the certificate status information. OCSP returns the certificate online status information to quickly check whether the certificate has expired, whether it has been revoked and so on.</p><p>Start command：<code>zaca ocsp</code>，Default listening port 8082</p><h3 id=api-service>API service</h3><p>Provide CA center API service, which can be accessed after the service is started<code>http://localhost:8080/swagger/index.html</code>，View API documentation.</p><p>Start command：<code>zaca api</code>，Default listening port 8080</p><h3 id=sdk-installation>SDK Installation</h3><pre tabindex=0><code>$ go get github.com:ZTDBP/ZACA
</code></pre><p>The classic usage of the ZACA SDK is that the client and the server use the certificate issued by the CA center for encrypted communication. The following is the usage of the sdk between the client and the server.</p><p>See：</p></section><div class=clearfix><div class="post-date pull-left"><span class=small>Posted on
Apr 20, 2022 at 18:35</span></div><div class=pull-right><span class="post-tag small"><a href=https://ztdbp.xyz/ztdbp_blog/tags/zaca/>#ZACA</a></span>
<span class="post-tag small"><a href=https://ztdbp.xyz/ztdbp_blog/tags/ztdbp/>#ZTDBP</a></span>
<span class="post-tag small"><a href=https://ztdbp.xyz/ztdbp_blog/tags/cfssl/>#CFSSL</a></span></div></div><footer><div class=delimiter></div><div class=pager-container><a class="btn btn-primary btn-older-posts" href=https://ztdbp.xyz/ztdbp_blog/zeroaccess-whitepaper/><div><span aria-hidden=true>&larr;</span> Older Posts</div></a><a class="btn btn-primary btn-newer-posts" href=https://ztdbp.xyz/ztdbp_blog/ztdbp-best-practices/><div>Newer Posts <span aria-hidden=true>&rarr;</span></div></a></div></footer></article><div class=delimiter></div></main><footer class="container global-footer"><div class="copyright-note pull-left">&copy 2022 ZTDBP
   </div><div class="sns-links hidden-print"></div></footer></body></html>